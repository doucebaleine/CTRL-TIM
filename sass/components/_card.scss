.pile-affiches {
  width: 900px;
  height: 400px;
  pointer-events: auto;
}

.carte-affiche {
  position: absolute;
  width: 560px;
  height: 380px;
  border-radius: 10px;
  --border-grad: linear-gradient(90deg,#D167FF,#62B8FF);
  background: linear-gradient(180deg, rgba(18, 18, 30, 0.9), rgba(12, 12, 22, 0.9));
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 420ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 360ms ease, box-shadow 360ms ease;
  pointer-events: auto;
  border: 1px solid transparent;
  background-clip: padding-box;
  overflow: hidden;
}

.carte-affiche img {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  display: block;
  object-fit: cover;
}

.carte-affiche::after {
  content: "";
  position: absolute;
  inset: -4px;
  border-radius: 10px;
  background: var(--border-grad);
  z-index: -2;
}

.affiche-haut {
  transform: translate(0, 0) rotate(0deg);
  z-index: 40;
}

.affiche-milieu {
  transform: translate(12px, 12px) rotate(-2deg);
  z-index: 30;
}

.affiche-arriere {
  transform: translate(24px, 24px) rotate(-4deg);
  z-index: 20;
}

/* Bouton fermer */
.bouton-fermer-affiche {
  position: absolute;
  top: 8px;
  right: 10px;
  background: rgb(67 67 67 / 50%);
  color: #fff;
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 160ms ease, transform 120ms ease;

  /* Survol & focus : assombrir l'arrière-plan pour augmenter le contraste */
  &:hover {
    background: rgb(67 67 67 / 85%);
  }

  &:active {
    transform: translateY(1px) scale(0.98);
  }

  /* focus clavier pour l'accessibilité */
  &:focus-visible {
    outline: 2px solid rgba(209,103,255,0.9);
    outline-offset: 2px;
    background: rgb(67 67 67 / 65%);
  }
}

/* animation de fermeture */
.carte-affiche.fermeture {
  transform: translateX(140%) rotate(8deg) scale(0.95);
  opacity: 0;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.35);
}

/* lorsqu'une carte devient haut, animer la transformation */
.carte-affiche.animer-vers-haut {
  transition: transform 420ms cubic-bezier(0.2, 0.9, 0.2, 1), box-shadow 360ms ease;
}

/* nouvelle apparence de l'affiche arrière */
.carte-affiche.nouvelle-arriere {
  transform: translate(28px, 28px) rotate(-6deg) scale(0.9);
  opacity: 0;
}

.carte-affiche.nouvelle-arriere.apparaitre {
  transform: translate(24px, 24px) rotate(-4deg) scale(1);
  opacity: 1;
}